<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Student Management System</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
        />
    </head>
    <body>
        <h1 class="m-2">Student Management System</h1>
        <div class="conatainer">
            <div class="row justify-content-around">
                <div class="col-2" style="border: 1px solid black">
                    <h1>Class List</h1>
                    <ul>
                        <li id="class1">Lớp 1</li>
                        <li id="class2">Lớp 2</li>
                    </ul>
                </div>
                <div class="col-9 p-0" style="border: 1px solid black">
                    <h5 style="border: 1px solid gray; padding: 10px">
                        Edit student's information
                    </h5>
                    <div style="display: flex">
                        <form style="padding: 10px">
                            <div style="text-align: center; display: flex">
                                <input
                                    type="text"
                                    id="studentId"
                                    value=""
                                    placeholder="ID"
                                    style="margin-right: 20px; width: 170px"
                                />
                                <input
                                    type="text"
                                    id="studentName"
                                    value=""
                                    placeholder="Full Name"
                                    style="margin-right: 20px; width: 200px"
                                />
                                <input
                                    type="text"
                                    id="studentEmail"
                                    value=""
                                    placeholder="Email"
                                    style="margin-right: 20px; width: 170px"
                                />
                                <select
                                    name="grade"
                                    id="grade"
                                    style="margin-right: 20px; width: 100px"
                                >
                                    <option unselected>Class...</option>
                                    <option value="Class 1">Class 1</option>
                                    <option value="Class 2">Class 2</option>
                                    <option value="Class 3">Class 3</option>
                                </select>
                            </div>
                        </form>
                        <button class="btn btn-primary" id="updateButton">
                            Update
                        </button>
                    </div>
                    <div style="padding: 20px">
                        <div>Student List</div>
                        <table>
                            <colgroup>
                                <col style="width: 10%" />
                                <col style="width: 40%" />
                                <col style="width: 10%" />
                                <col style="width: 30%" />
                            </colgroup>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Full Name</th>
                                    <th>Student ID</th>
                                    <th>Function</th>
                                </tr>
                            </thead>
                            <tbody id="datas"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
            crossorigin="anonymous"
        ></script>
        <script>
            let array = [];
            jQuery.get(
                "http://139.180.213.49/getdata-student.php?Type=Student",
                {
                    ID: "",
                    Name: "",
                    Email: "",
                    Class: "",
                },
                function (data) {
                    array.push(data);
                    console.log(data);
                    for (getData of data) {
                        $("#datas").append(`<tr>
                        <td id="studentID">${getData.ID}</td>
                        <td id="studentName">${getData.Name}</td>
                        <td id="studentEmail">${getData.Email}</td>
                        <td><button id="editButton" style="margin-right:10px">Edit</button><button id="deleteButton">Delete</button></td>
                    </tr>`);
                    }
                },
                "json"
            );
            $("#datas").on("click", "#deleteButton", function () {
                $(this).parent().parent().remove();
            });
            $("#datas").on("click", "#editButton", function () {
                console.log($(this).parent().parent().children().get());
            });
            $("#updateButton").on("click", function () {
                let studentID = $("#studentId").val();
                let studentName = $("#studentName").val();
                let studentEmail = $("#studentEmail").val();
                let studentClass = $("#grade").val();
                console.log(studentID);
                array.unshift({
                    ID: studentID,
                    Name: studentName,
                    Email: studentEmail,
                    Class: studentClass,
                });
                console.log(array);
            });
            function loadData() {
                for (getData of array) {
                    $("#datas").append(`<tr>
                        <td id="studentID">${getData.ID}</td>
                        <td id="studentName">${getData.Name}</td>
                        <td id="studentEmail">${getData.Email}</td>
                        <td><button id="editButton" style="margin-right:10px">Edit</button><button id="deleteButton">Delete</button></td>
                    </tr>`);
                }
            }
        </script>
    </body>
</html>
